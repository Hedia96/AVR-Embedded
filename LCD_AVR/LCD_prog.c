/*
 -






































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 * LCD_prog.c
 *
 *  Created on: Mar 4, 2019
 *      Author: AyetAllah
 */

#include "STD_TYPES.h"
#include "BIT_CALC.h"
#include "util/delay.h"

#include "DIO_interface.h"
#include "DIO_config.h"
#include "DIO_private.h"

#include "LCD_interface.h"
#include "LCD_private.h"

/* NAME       :Vwrite
 * DESCRIPTION:THIS FUNCTION TO WRITE A BYTE OR U8 WHATEVERT IS DATA OR COMMAND
 * ARGUMENTS  : U8 COPY_U8DATA_COMMAND
 * RETURN     : void
 *
 */
static void Vwrite(u8 Copy_u8DataCommand)
{	/* read/write signal in lcd active low in write so */
	DIO_u8SetPinValue(LCD_R_W_BAR,DIO_PIN_LOW);
	/*this signal enable  controller in lcd module should be like that low -high -low so we set firstly low
	 * after write data we set enable high then wait for 39 micro sec finally set by low */
	DIO_u8SetPinValue(LCD_ENABLE,DIO_PIN_LOW);

	DIO_u8SetPinValue(LCD_D0,GET_BIT(Copy_u8DataCommand,0));
	DIO_u8SetPinValue(LCD_D1,GET_BIT(Copy_u8DataCommand,1));
	DIO_u8SetPinValue(LCD_D2,GET_BIT(Copy_u8DataCommand,2));
	DIO_u8SetPinValue(LCD_D3,GET_BIT(Copy_u8DataCommand,3));
	DIO_u8SetPinValue(LCD_D4,GET_BIT(Copy_u8DataCommand,4));
	DIO_u8SetPinValue(LCD_D5,GET_BIT(Copy_u8DataCommand,5));
	DIO_u8SetPinValue(LCD_D6,GET_BIT(Copy_u8DataCommand,6));
	DIO_u8SetPinValue(LCD_D7,GET_BIT(Copy_u8DataCommand,7));

 DIO_u8SetPinValue(LCD_ENABLE,DIO_PIN_HIGH);


 _delay_ms(1);

 DIO_u8SetPinValue(LCD_ENABLE,DIO_PIN_LOW);


}
/* NAME       :
 * DESCRIPTION:
 * ARGUMENTS  :
 * RETURN     :
 *
 */

void LCD_VInit(void)
{
	//delay after power on and before function reset
//set function
LCD_u8WriteCommand(0b00111100);
_delay_ms(40);
//display on/off
LCD_u8WriteCommand(0b00001100);
_delay_ms(40);

//clear
LCD_u8WriteCommand(0b0000001);
_delay_ms(40);
}


u8 LCD_u8WriteData(u8 Copy_u8_Data)
{ u8 Local_u8ErrorState=ERROR_NO;
DIO_u8SetPinValue(LCD_RS,DIO_PIN_HIGH); //high data
Vwrite(Copy_u8_Data);

return Local_u8ErrorState;
}
u8 LCD_u8WriteCommand(u8 Copy_u8_Commad)
{
	u8 Local_u8ErrorState=ERROR_NO;
	DIO_u8SetPinValue(LCD_RS,DIO_PIN_LOW); //low insterction
	Vwrite(Copy_u8_Commad);
return Local_u8ErrorState;
}
/*
 *
 * static void LCD_VwriteChar( u8 char);
 *
 * u8 LCD_VWrite(u8 *ptr,u8 Copyxpos,u8 y)
 * {
 * u8 Local_u8ErroeState=;//local
 *
 * if (X< 16 && y<2)
 * {
 * add=y*0x40+ xpos
 * command ddram 1......
 * where .... address
 *  add|=0x80;
 *  writeCmd(add);
 *  while(*ptr!='\0')
 *  {
 *  Lcd_writechar(*ptr);
 *  ptr++
 *  add++;// simulate add register to know our boundries
 *  if(add ==0x90) //end line 1 001 0000
 *  {
 *  	add=0xC0; 1 100 0000
 *  	writecmd(add);
 *  }
 *  else if(add ==xD0) end lin two 1 101  0000
 *  {
 *  	add=x80;
 *  	wriecmd(add);
 *  }
 * }
 * }else
 *
 * {not ok}
 * }
 *
 *
 */

